# 明朝官场那些事 — 总体游戏设计文档（GDD）

> 版本：v0.2 | MVP阶段：县令三年  
> 核心理念：AI Agent驱动的明朝官场博弈模拟  

---

## 1. 游戏概述

### 1.1 一句话描述
在AI Agent构成的明朝官场生态中，扮演一名新科进士，从七品县令做起，在施政、博弈、社交中追求自己定义的"成功"。

### 1.2 核心体验
- **博弈感**：每个NPC都是有目标、有性格、有政治理念的AI Agent，构成"活的"官场生态
- **两难抉择**：没有标准答案，每个决策都有代价，玩家用选择定义自己
- **因果链条**：今日之因，他日之果；短期收益可能埋下长期隐患
- **信息迷雾**：大量信息半隐藏，玩家需要通过社交和观察推断局势

### 1.3 世界观内核
- **积极务实**：理解隐忍与平衡的重要性，面对强大君权和利益冲突如何务实应对
- **格物致知**：不管多高尚的理想，都得基于科学有效的方法脚踏实地执行
- **自由定义**：游戏不预设"正确"的玩法，玩家的选择本身就是意义

### 1.4 目标玩家
- 喜欢策略模拟、历史题材的玩家
- 喜欢叙事驱动、角色扮演体验的玩家
- 对中国历史官场文化感兴趣的泛用户

### 1.5 平台与形态
- MVP阶段：Web端（便于快速迭代）
- 核心交互：文字对话 + 策略选择 + 数据面板
- 单局时长：MVP版 90-180 分钟（县令三年）

---

## 2. 核心玩法循环

### 2.1 宏观循环（Meta Loop）
```
入仕 → 赴任 → [年度施政循环 ×N] → 考核 → 升迁/留任/贬黜 → 新任地 → ...
```

### 2.2 回合制节奏

**构思原案**：每月分上中下旬，三个回合，每年36回合  

| 季度 | 主题 | 核心行动 |
|------|------|----------|
| 春 | 规划与播种 | 制定年度投资方向、分配预算、安排春耕 |
| 夏 | 执行与应变 | 处理突发事件（灾害、案件、流民）、执行政策 |
| 秋 | 收获与征税 | 秋收结算、执行税收、处理抗税/欠税 |
| 冬 | 社交与考核 | 官场社交、中央政策表态、年终考核 |



### 2.3 行动力系统
- 每回合 **3个行动点**（AP），全年共72个AP
- 不同操作消耗不同AP，具体待定
- 部分突发事件为**强制事件**，必须处理，消耗AP但不可跳过
- 未用完的AP不累积

### 2.4 一个季度内的操作流程
```
季度开始
  → 查看状态面板 + 全局环境暗示
  → 触发事件（0-2个，含强制事件）
  → 处理事件 / 执行主动行动
  → （冬季）中央政策表态 + 社交活动
  → 季度结算
  → 下一季度
```

---

## 3. 世界观与背景设定

### 3.1 平行宇宙机制
- 每局新游戏 = 一个平行宇宙
- 从明朝典型君主中随机选择一位作为当朝皇帝（影响全局政治气候）
- 从历史人物库中填充中央及省府级官员（抹去真名，保留性格/关系网/籍贯）
- 县州级官员及地方NPC为程序生成的虚拟人物

### 3.2 可选君主原型（MVP选3个）

| 原型 | 参考 | 执政风格 | 对玩家的影响 |
|------|------|----------|-------------|
| 勤政型 | 朱元璋/朱棣 | 高压、重农、反腐 | 税收压力大，贪腐风险高，但清官易出头 |
| 怠政型 | 嘉靖/万历 | 放权内阁、朝堂党争 | 党派博弈激烈，施政自由度高但考核看站队 |
| 中庸型 | 仁宗/宣宗 | 温和、开明 | 各方面较平衡，难度适中 |

### 3.3 行政架构
```
皇帝
├── 内阁（首辅1 + 成员2-4，一品或二品）
├── 六部
│   ├── 吏部（尚书1×二品 + 侍郎6×三品）← 主管考核升迁，居六部之首
│   ├── 户部（尚书1 + 侍郎3）← 财政税收
│   ├── 礼部（尚书1 + 侍郎3）← 科举外交
│   ├── 兵部（尚书1 + 侍郎3）← 军事
│   ├── 刑部（尚书1 + 侍郎3）← 司法
│   └── 工部（尚书1 + 侍郎3）← 工程水利
├── 都察院（言官机构）
└── 地方
    ├── 总督（一品，多省）
    ├── 巡抚（二品，省）
    ├── 知府（三/四品，府）
    ├── 省下辖司（五品：布政司/按察司）
    ├── 知州（六品，州）── 与县平级，更繁荣
    └── 知县（七品，县）← 玩家起点
```

### 3.4 全局环境系统

每局开始时初始化，影响全局基调。MVP版初始设定后不动态变化（后续版本可加入动态演变）。

| 环境维度 | 参数 | 取值 | 影响 |
|---------|------|------|------|
| 政治气候 | 君主主导 or 派系主导 | 初始设定 | 影响考核权重、政策方向、弹劾风险 |
| 经济气候 | 繁荣/平稳/萧条 | 初始设定 | 影响基础商业指数、税收指标 |
| 地理气候-农业适宜度 | 0-1 | 每年微调 | 影响耕地收成基础系数 |
| 地理气候-水患风险度 | 0-1 | 每年微调 | 影响水灾概率（水利可降低） |
| 地理气候-边患风险度 | 0-1 | 每年微调 | 影响中央征兵强度 |

> 地理气候参数每年初给出"粗略暗示"（如"今春雨水偏多"），不直接告知数值。

---

## 4. 玩家角色

### 4.1 初始设定
- 身份：新科进士，初授七品县令
- 玩家在开局时选择 **出身背景**（影响初始属性和关系网）：
  - 寒门子弟：初始关系网弱，但民间好感度高
  - 书香门第：初始文教能力强，有1-2个学术圈关系
  - 官宦之后：初始关系网强（1个中央关系），但起点期望高

### 4.2 玩家属性
**玩家角色不预设属性值，而是靠行为定义自己。** 系统在后台根据玩家行为积累评价，但不对玩家显示精确数值。

- **内在核心能力**：
  - 原则1，内在能力不是通过具体做事提升，而是通过失败后的成功提升
  - 原则2，学习（游戏内知识问答）或具体执政，做错后再做对，内在能力才会提升
  - 知识：农耕，经济，地理(水利)等方面知识储备，影响县域治理相关效果
  - 技能：谈判，协调等方面技能，影响谈判相关的环节效果
  - MVP版本只粗略的分知识和技能，后续版本考虑细分xx知识，xx技能等
- **声望维度**（外部评价，半隐藏——玩家可看到5档粗略分级，但分级与真实数值有偏差）：
  - 清名：公正廉洁的口碑；默认为50，根据官场中相关行为调整，比如是否收礼，是否为平民主持公道
  - 能名：干练能干的口碑；默认为30，根据官场中相关行为调整，比如处理突然事件，县域治理成果等
  - 人缘：官场中好相处的口碑；默认为10，根据官场中相关行为调整，比如弹劾他人，参加聚会等

### 4.3 玩家目标与结局
- 游戏不设单一胜利条件
- **罢黜（停薪停职）= 游戏失败**，可视为Game Over，玩家可以重开，也可以继续游戏等待中央高层重新启用，依赖之前积累的声望和社交关系
- 其他结局在三年结束时根据多维度评价生成"历史评价"
- 玩家自行定义追求方向：政绩卓著、清名流芳、人脉广博、财富传家等

---

## 5. AI Agent 系统（概要）

> 详见：`01_AI_Agent系统设计.md`

### 5.1 Agent分层
- **完整Agent**（LLM驱动）：与玩家直接交互的角色
- **轻量Agent**（规则引擎+模板）：外围角色
- **背景Agent**（纯数值模拟）：不直接出场但影响世界状态的角色

### 5.2 Agent属性体系（三层结构）

| 层级 | 属性 | 说明 |
|------|------|------|
| 核心属性 | 智力、体魄 | 基础能力，影响决策质量和执行力 |
| 性格属性（隐藏） | 合群vs孤僻、理性vs感性、沉默vs张扬 | 影响行为风格和社交模式 |
| 政治理念（隐藏） | 社稷vs黎民、集权vs分权、现实vs理想 | 影响政策倾向和派系归属 |
| 名誉属性（半隐藏） | 清名、能名、人缘、威名 | 5档粗略分级对外可见，有偏差 |

### 5.3 Agent核心要素
每个Agent具备：目标体系（多目标权重）、三层属性、记忆系统、关系网络、可见信息范围

### 5.4 关键Agent角色（MVP）
- 直属上级（知府）×1
- 同级官员（邻县县令）×2
- 县域地主士绅 ×3-5
- 村民代表 ×若干
- 商户代表 ×1-2
- 幕僚：师爷（沈清远）×1 + 县丞（周正卿）×1（游戏助理+策略顾问，注入游戏知识）
- 考核相关官员 ×3-5（年终出现）

---

## 6. 县域经营系统（概要）

> 详见：`02_县域经营模型.md`

### 6.1 县域基础属性
人口、耕地面积、县库现金、民心、治安、商业、文教

### 6.2 下辖单元
- 村庄（50-100个）：各有人口(100-1000）、耕地（村民人均前期10亩产，后期5亩，收地主士绅兼并土地影响）、民心、治安、地主（含profile和官场关联）、有无村塾
   - MVP版本12-15个村
   - 每个村有1个村民代表 Agent
- 集市（5-10个）：商户数、商业税收系数、发展指数
   - MVP版本2-3个商户

### 6.3 士绅阶层
- 拥有科举功名或退休官员/家属，构成县里的士绅阶层
- 明初占地约30%，明末可达70%；南方集中度大于北方
- 每个地主士绅为独立Agent，有品行属性和官场利益关联

### 6.4 军事与治安
- MVP设定为明朝前期卫所制：军队与地方行政独立，山贼/起义报告卫所处理
- 县级只维护衙役（类似辅警），增加行政开支

### 6.5 核心矛盾
- 短期投资 vs 长期投资
- 地主利益 vs 百姓利益
- 中央税收 vs 地方发展
- 个人前途 vs 施政理念

---

## 7. 事件系统（概要）

> 详见：`03_事件系统设计.md`

### 7.1 事件分类
- **常规事件**：每季度必触发（春耕、征税、中央政策表态等）
- **随机事件**：基于概率触发（自然灾害、山贼、京官到访、上级征兵）
- **链式事件**：由前序决策触发（得罪地主→考核被压、修水利→3年后丰收）
- **对话事件**：需要与AI Agent直接对话交互（审案、谈判、面见上级、述职）

### 7.2 事件结构
每个事件包含：触发条件 → 场景描述 → 选项/对话 → 即时后果 → 延迟后果标记 → Agent反应

---

## 8. 社交与关系系统（概要）

> 详见：`04_社交与关系系统.md`

### 8.1 好感度体系
- 范围：-99 到 99，初始值10，受籍贯(+10)、同窗(+5)、同部门(+10)等关系影响

### 8.2 人情债系统
- 重大帮助（如保人、救急）形成人情债
- 对方日后主动提出需求时需偿还
- 拒绝偿还 → 社交信誉大幅下降，好感度暴跌
- 人情债是官场社交的核心货币之一

### 8.3 中央政策表态
- 每季度一次（冬季为主，其他季度可能有紧急政策）
- 内容：全国性税赋调整、是否对外动武、兴修全国性水利/运河、科举改革等
- 表态行为本身是站队信号，影响与各派系的关系

### 8.4 社交行动
- 聚会、书信、送礼、拜访、举荐、弹劾、造谣、公开颂扬
- 每次社交消耗1AP（书信免费，每季度限1封）

### 8.5 党派系统
- 初始：手动设置中央顶层派系（基于政治理念和个人关系）
- 动态：满足条件时自动形成新派系
- 派系与皇帝之间有好感度
- 派系归属影响考核、信息获取、合作意愿

### 8.6 情报/传闻系统
- 通过社交获取碎片信息，拼凑官场动向
- 信息有真有假，需要玩家判断和交叉验证

---

## 9. 考核与升迁系统（概要）

> 详见：`05_考核与升迁系统.md`

### 9.1 考核频率
- 每年冬季进行年度考核
- 三年为一个大考核周期

### 9.2 县州级考核委员会（5人）
- 本省省级官员 ×2
- 对应知府 ×1
- 吏部侍郎 ×1
- 外省随机省级官员 ×1

### 9.3 府/省级考核委员会（后续版本）
- 吏部：尚书1 + 侍郎3
- 内阁成员随机1人
- 朝中一品虚职随机1人
- 君主对升迁有一票否决权

### 9.4 考核结果
- 升迁：进入更高职位
- 留任：继续原职
- 免职：品级薪俸不变，无职位，等待新任命
- 罢黜：停薪停职，**游戏失败**

### 9.5 人事流动
- 每年新一批科考上岸人员加入（默认八品，做县令助手）
- 60岁默认退休（除非高级官员点名续用）
- 一二品官员退休年龄放宽到66岁
- 非内阁的一二品官员过60岁转虚职

---

## 10. 数值体系（概要）

> 详见：`06_数值体系设计.md`

### 10.1 核心指标联动关系
```
全局环境（农业适宜度/水患风险/边患风险）
              ↓
民心 ←→ 治安 ←→ 商业
 ↑         ↑        ↑
文教      衙役     税收政策
 ↑                   ↑
投资方向 ←→ 县库资金
```

### 10.2 经济模型
- 收入：农业税 + 商业税 + 上级拨款
- 支出：行政开支 + 投资支出 + 上缴税额 + 突发支出

### 10.3 信息不透明原则
- 核心指标只显示描述性等级（极差/低迷/尚可/良好/繁荣），不显示数值
- 声望只显示5档粗略分级，且与实际值有偏差
- Agent好感度、考核权重等完全隐藏

---

## 11. 趣味性设计（概要）

> 详见：`07_趣味性与体验设计.md`

- **对话博弈**：审案、谈判、辩论、述职等场景的AI对话交互
- **两难困境**：精心设计的无标准答案抉择
- **因果报应链**：决策的长期连锁反应
- **人情债**：官场中的人情往来与道德困境
- **幕僚系统**：师爷兼任游戏助理、新人引导、策略顾问
- **中央政策表态**：每季度的站队博弈
- **历史彩蛋**：决策后的历史对照
- **结局评价**：多维度的历史人物类比

---

## 12. MVP范围定义（县令三年）

### 12.1 包含内容
- 1个县域（6个村 + 2个集市）
- 3个年度周期（12个季度）
- 3种君主原型（随机选1）
- 3种出身背景（玩家选1）
- 全局环境初始化（不动态变化）
- 核心Agent约14个
- 事件库约30-40个事件模板
- 对话场景：审案、征税谈判、面见上级、社交聚会、年终述职
- 好感度 + 人情债系统
- 中央政策表态（简化版，每年冬季1次）
- 党派系统（简化版，预设2-3个派系）
- 年度小考 ×2 + 三年大考 ×1
- 结局评价系统

### 12.2 不包含（后续版本）
- 旬制回合（36回合/年）
- 升迁后的知府/更高级别玩法
- 动态全局环境演变
- 动态派系形成
- 完整的中央朝堂博弈
- 后宫/宦官系统
- 募兵制军事深度扩展

### 12.3 技术架构概要
- 前端：Web（React或类似框架）
- 后端：Python/Node，管理游戏状态和Agent调度
- AI层：核心Agent调用LLM API，轻量Agent用规则引擎
- 数据：JSON/数据库存储世界状态，每回合快照用于存档

---

## 13. 子文档索引

| 编号 | 文档名 | 内容 |
|------|--------|------|
| 01 | AI Agent系统设计 | Agent分层、三层属性体系、决策模型、Prompt设计 |
| 02 | 县域经营模型 | 县/村/集市的数值模型、士绅阶层、经济循环 |
| 03 | 事件系统设计 | 事件分类、模板结构、事件库、链式事件、对话事件 |
| 04 | 社交与关系系统 | 好感度、人情债、党派系统、中央政策表态、情报系统 |
| 05 | 考核与升迁系统 | 考核委员会、评分规则、人事流动、升迁路径 |
| 06 | 数值体系设计 | 指标定义、全局环境、联动公式、信息不透明设计 |
| 07 | 趣味性与体验设计 | 对话博弈、困境设计、幕僚系统、历史彩蛋 |
| 08 | MVP开发计划 | 开发阶段、优先级、里程碑 |
